---
import { getEntry } from "astro:content";
import LazyCard from '@components/LazyCard.vue';

interface Props {
  className: string;
  identifier: string;
}

const { className, identifier } = Astro.props;
const cleanIdentifier = identifier.replace("__",":")
const record = await getEntry("maps", identifier.replace(":","__"));

const title = record.data.dcMetadata.title_info_primary_tsi;
const subtitle = record.data.dcMetadata.title_info_primary_subtitle_tsi;
const linkText = 'See map';
const linkHref = `/maps/${cleanIdentifier}`;
const image = `https://bpldcassets.blob.core.windows.net/derivatives/images/${record.data.dcMetadata.exemplary_image_ssi}/image_thumbnail_300.jpg`;
---

<LazyCard
  client:visible
  className={className}
  title={title}
  subtitle={subtitle}
  link={{
    href: linkHref,
    text: linkText
  }}
  image={image}
/>
